$("#charge-search-results-container").html("<%= j render 'charge_page' %>")

$("[name='track-switch']").change( function() {
  var state = $(this).is(":checked")
  <% if @category.present? %>
    if( state ) {
      var cat_id = "#{@category.present? ? @category.id : ''}";
      var charge_params = { charge: { recurring: state, trym_category_id: cat_id }, scan: "scan" };
    } else {
      var cat_id = { charge: { recurring: state, trym_category_id: '' }, scan: "scan" };
    }
  <% else %>
    var charge_params = { charge: { recurring: state }, scan: "scan", view_all: 'true' };
  <% end %>
  $.ajax({
    type: "PUT",
    url: "/charges/" + $(this).data("charge-id"),
    data: charge_params,
    dataType: "script"
  })
});

$('[data-toggle="popover"]').popover({html: true, trigger: 'focus', title: "<i class='fa fa-calendar'></i> Charge History"});
